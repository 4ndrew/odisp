% $Id: model.tex,v 1.1 2004/03/13 21:21:11 valeks Exp $
\documentclass[a4paper]{article}
\usepackage[koi8-r]{inputenc}
\usepackage[T2C,T1]{fontenc}
\usepackage[russian]{babel}
\usepackage{fancyhdr}
\pagestyle{fancy}
\title{Описание логики ODISP.}
\author{Валентин А. Алексеев}
\frenchspacing
\begin{document}
\chead{\bfseries НПП ``Новел-ИЛ''}
\vbox{
  \vskip .35 \textheight
  \begin{center}
    Валентин А. Алексеев\\*
    \bfseries{\Large Описание логики ODISP.}
  \end{center}
}
\cfoot{Санкт-Петербург \\* 2004}
\newpage
\lhead{$Revision: 1.1 $}
\chead{}
\rhead{Описание логики ODISP.}
\cfoot{\thepage}
\tableofcontents
\newpage
\section{Введение}
Не так давно я занялся интерестной умозрительной задачей привязки
того, что происходит (или должно происходить) внутри ODISP к каким
либо реальным системам или моделям.

После некоторых раздумий была выбрана модель ресторанного
обслуживания. Детали модели варьируются от ``фастфуда'' до ресторана
высокого класса.

Каждое узкое место в системе далее рассматривается с двух точек
зрения: с точки зрения модели ресторана и с точки зрения существующей
или возможной реализации в ODISP.

\section{Менеджер ресурсов}
{\bf Ресторан:} здесь идет полная копия логики кассиров
за стойкой и шеф-повара на кухне. Основная идея такова: у шеф-повара
часто заказываемые блюда всегда наготове. Кассиру остается только
оформить заказ (например, записать заказ для дальнейшего подсчета).

{\bf ODISP:} менеджер ресурсов имеет наготове полностью
"приправленный" ресурс. в ответ на запрос о захвате ресурса ему не
нужно много времени на то, что бы дописать в ресурс вобщем-то
исключительно сервисную информацию типа кто, когда и что.

\section{Проблема "синхронной асинхронности"}
{\bf Ресторан:} когда посетитель хочет сделать заказ, он подзывает
официанта и описывает суть своего вопроса-заказа-etc. после чего
возвращается к еде или напиткам. в тот же самый момент в зале
находится несколько официантов, готовых принять заказ.

{\bf ODISP:} отправка сообщения внутри odisp должна идти не
одним каналом (официантом) как сейчас, а несколькими. фактически
запрос send должен помещать "заказ" в одну из нескольких очередей
выполнения внутри диспетчера. каждая из этих очередей работает в
отдельной нити.

\section{Внешние объекты}
{\bf Ресторан:} меню "на вынос" или в терминах фастфуда
"drive-inn". каждый ресторан обычно имеет меню, блюда из которого
могут быть упакованы и проданы покупателю с улицы. 

{\bf ODISP:} в odisp это ни что иное как is/setRoutable. изменение
этого флага суть добавление или исключение сообщения из "меню на
вынос".

\section{Загрузка объектов}
{\bf Ресторан:} при входе клиента в ресторан ему предлагают столик,
меню, минеральную воду или другой аперитив, газету и т.п. клиент может
отказатся от той же газеты, но без столика и меню он не уйдет

{\bf ODISP:} столик или меню -- номер odisp объекта, газета это в
том или ином виде конфигурация, которая по запросу может быть считана
из какого либо хранилища.

\section{Сессии}
Сессии в модель ресторана вписываются с натяжкой, однако некое подобие
все ж есть. Клиент, отправляя записку с официантом, пишет на ней
адресата и пару строк текста. Получатель может дописать в записку
ответ и вернуть ее отправителю и т.п.

{\bf ODISP:} тут мы долго спорили и я нашел еще один выход с
сессиями. возможно утяжелить сообщения, т.е. передавать вместе с
ответом некоторый контекст ($\ne$ содержимого старых сообщений).

\section{Service discovery}
Тут пожалуй подойдет не модель хорошего ресторана, а митинг в
кафетерии большой софтверной компании. разработчики из одного и того
же отдела обычно сидят вместе и каждый разработчик может обратится не
только к кому-то конкретно указав официанту имя и столик, но и просто
"тем, кто сидит там-то". 

{\bf ODISP:} ну тут вобщем-то схему с discovery мы обсуждали.
\newpage
\appendix
% тут идут комментарии
\end{document}